<!DOCTYPE html>
<html>
<head>
    <title>Chat Groupe {{ group.name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<header>
    <h1>Chat du Groupe : {{ group.name }}</h1>
</header>
<div class="container">
    <form method="POST">
        <input type="text" name="message" placeholder="Écris ton message..." required>
        <button type="submit">Envoyer</button>
    </form>
    <h2>Messages :</h2>
    {% for msg in messages %}
        <div class="message">{{ msg.content }}</div>
    {% endfor %}
</div>
</body>
</html>
<script>
function loadMessages() {
    fetch("/messages/{{ group.id }}")
        .then(response => response.json())
        .then(data => {
            let chatBox = document.getElementById("chat-box");
            chatBox.innerHTML = "";
            data.forEach(msg => {
                let div = document.createElement("div");
                div.innerHTML = `<b>${msg.user}</b> [${msg.time}]: ${msg.content}`;
                chatBox.appendChild(div);
            });
        });
}

// recharge toutes les 2 secondes
setInterval(loadMessages, 2000);

// charger au démarrage
loadMessages();
</script>



